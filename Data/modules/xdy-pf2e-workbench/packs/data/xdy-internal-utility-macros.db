{"_id":"XyM7blfJk6AOH5DB","actorIds":[],"author":"MDuLYzHXq3OZTVPN","command":"const actors = canvas.tokens.controlled.flatMap((token) => token.actor ?? []);\nif (actors.length === 0 && game.user.character) actors.push(game.user.character);\nif (actors.length === 0) {\n    return ui.notifications.error(\"PF2E.ErrorMessage.NoTokenSelected\", { localize: true });\n}\n\nconst ITEM_UUID = \"Compendium.pf2e.other-effects.I9lfZUiCwMiGogVi\"; // Effect: Cover\nconst source = (await fromUuid(ITEM_UUID)).toObject();\nsource.flags = mergeObject(source.flags ?? {}, { core: { sourceId: ITEM_UUID } });\n\nfor (const actor of actors) {\n    const existing = actor.itemTypes.effect.find((e) => e.flags.core?.sourceId === ITEM_UUID);\n    if (existing) {\n        await existing.delete();\n    } else {\n        await actor.createEmbeddedDocuments(\"Item\", [source]);\n    }\n}\n","flags":{},"img":"icons/svg/dice-target.svg","name":"macroEffectCover","permission":{"default":1},"scope":"global","type":"script"}
{"_id":"yTGVnVBjlTE387p5","actorIds":[],"author":"1ltpz9SID1o2VCoP","command":"const actors = canvas.tokens.controlled.flatMap((token) => token.actor ?? []);\nif (actors.length === 0 && game.user.character) actors.push(game.user.character);\nif (actors.length === 0) {\n    return ui.notifications.error(\"PF2E.ErrorMessage.NoTokenSelected\", { localize: true });\n}\n\nconst ITEM_UUID = \"Compendium.pf2e.other-effects.AHMUpMbaVkZ5A1KX\"; // Effect: Aid\nconst source = (await fromUuid(ITEM_UUID)).toObject();\nsource.flags = mergeObject(source.flags ?? {}, { core: { sourceId: ITEM_UUID } });\n\nfor (const actor of actors) {\n    const existing = actor.itemTypes.effect.find((e) => e.flags.core?.sourceId === ITEM_UUID);\n    if (existing) {\n        await existing.delete();\n    } else {\n        await actor.createEmbeddedDocuments(\"Item\", [source]);\n    }\n}\n","flags":{},"img":"icons/svg/dice-target.svg","name":"macroEffectAid","permission":{"default":1},"scope":"global","type":"script"}
